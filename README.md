Open Demo Reset
===============

[Download](https://github.com/jesobreira/open-demo-reset/archive/master.zip)

![Demo will reset in: 23:41:13](data:image/png;base64,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)

Do you sell or host the online demo of some script? Tired of child-ish people who post that pictures and things? Here you go!

This script creates a **draggable countdown widget at the bottom of the page**, telling the user how many minutes are remaining until the next demo reset update.

Once the time is reached (you can set the reset interval) it removes all files and folders from your script and copies new files from a backup folder specified by you. Also, it will remove all MySQL tables and re-install your script through a SQL file provided by you (it can be a phpMyAdmin dump). Finally, it will remove all existing sessions and user cookies.

And the best part: **NO** cronjob used :)

How to install
--------------

* Copy the "odr" folder onto your demo site root. You can modify the folder name if you want so.

* Open "config.inc.php" with a code editor and set this up:

```php
<?php

/////////////////////
// Open Demo Reset //
/////////////////////

define('TIME_INTERVAL', 60*60*24); // interval, in seconds, for each update
define('DEMO_FOLDER', '../'); // where your demo site is located
define('BACKUP_FOLDER', 'backup/'); // where your backup site is located
define('MYSQL_DUMP', 'backup.sql'); // where your phpMyAdmin dump is located

$ignore_files_n_folders = array('../README.md', '../.git/*'); // files you want to ignore (you don't need to include "odr" folder, even if you have changed the folder name)

// Now, set up your MySQL server, user, password and database:
$db = new mysqli('localhost', 'root', '', 'opendemoreset');
```

* Include the following HTML code for each file your users will run (if you have a template engine, use MVC or just have a header or footer separated, that's a lot easier):

```html
<!-- odr -->
<link rel="stylesheet" href="odr/style.css" type="text/css" />
<script type="text/javascript" src="odr/odr.js.php"></script>
<!-- /odr -->
```

(Note that, if you changed the "odr" folder name, you must change it on the code above too)

 * Copy your clean demo install to the "backup" folder. You can (and must, for security reason) change this folder name. Remember to tell what name you chose in config.inc.php file (BACKUP_FOLDER constant).

* Do a MySQL dump of your favorite MySQL administration tool (phpMyAdmin, Adminer etc.). Do not create the "CREATE DATABASE", nor the "DROP DATABASE". You don't have to create the "DROP TABLE" as it's already done by ODR, but it's not a problem if you do (it's just meaningless).

* Give writting permission (CHMOD 777) in ALL your demo site, using your FTP  or SSH client. This includes your script as well as the Open Demo Reset folder. Do not forget anything.

* That's all.